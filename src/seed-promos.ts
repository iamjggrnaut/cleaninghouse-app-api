import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';
import { PromosService } from './promos/promos.service';

async function seedPromos() {
  const app = await NestFactory.createApplicationContext(AppModule);
  const promosService = app.get(PromosService);

  const testPromos = [
    {
      title: '–ü–µ—Ä–≤–∞—è —É–±–æ—Ä–∫–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π 20%',
      description: '–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤',
      fullDescription: '–ü–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É 20% –Ω–∞ –ø–µ—Ä–≤—É—é —É–±–æ—Ä–∫—É –≤ –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∫–∞—á–µ—Å—Ç–≤–æ–º –Ω–∞—à–∏—Ö —É—Å–ª—É–≥ –ø–æ –≤—ã–≥–æ–¥–Ω–æ–π —Ü–µ–Ω–µ. –ê–∫—Ü–∏—è –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.',
      discount: '-20%',
      imageUrl: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800&h=600&fit=crop',
      validUntil: new Date('2024-12-31'),
      terms: [
        '–°–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
        '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞ 2000 —Ä—É–±–ª–µ–π',
        '–ê–∫—Ü–∏—è –Ω–µ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏',
        '–°–∫–∏–¥–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–∫–∞–∑–µ',
      ],
      isActive: true,
    },
    {
      title: '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞ - —Å–∫–∏–¥–∫–∞ 15%',
      description: '–≠–∫–æ–Ω–æ–º–∏—è –ø—Ä–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏',
      fullDescription: '–ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é —É–±–æ—Ä–∫—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —Å–∫–∏–¥–∫—É 15% –Ω–∞ –∫–∞–∂–¥—ã–π –≤–∏–∑–∏—Ç. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ—Ñ–∏—Å–æ–≤, –∫–≤–∞—Ä—Ç–∏—Ä –∏ –¥—Ä—É–≥–∏—Ö –ø–æ–º–µ—â–µ–Ω–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ —É—Ö–æ–¥–∞.',
      discount: '-15%',
      imageUrl: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&h=600&fit=crop',
      validUntil: new Date('2025-01-15'),
      terms: [
        '–°–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —É–±–æ—Ä–∫–∏',
        '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏ - 1 –º–µ—Å—è—Ü',
        '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –∑–∞ 24 —á–∞—Å–∞ –¥–æ –≤–∏–∑–∏—Ç–∞',
        '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–ª–∏–Ω–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞',
      ],
      isActive: true,
    },
    {
      title: '–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞ - —Å–∫–∏–¥–∫–∞ 25%',
      description: '–û—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–ø–∏—Ç–∞–ª—å–Ω–æ–π —É–±–æ—Ä–∫–∏',
      fullDescription: '–ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω—É—é —É–±–æ—Ä–∫—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É 25%. –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≥–ª—É–±–æ–∫—É—é –æ—á–∏—Å—Ç–∫—É –≤—Å–µ—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π, –º—ã—Ç—å–µ –æ–∫–æ–Ω, —É–±–æ—Ä–∫—É —Ç—Ä—É–¥–Ω–æ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Å—Ç.',
      discount: '-25%',
      imageUrl: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop',
      validUntil: new Date('2025-02-28'),
      terms: [
        '–°–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –≥–µ–Ω–µ—Ä–∞–ª—å–Ω—É—é —É–±–æ—Ä–∫—É',
        '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å 50 –∫–≤.–º',
        '–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 4-6 —á–∞—Å–æ–≤',
        '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è',
      ],
      isActive: true,
    },
  ];

  try {
    console.log('üå± –ù–∞—á–∏–Ω–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫—Ü–∏–π...');
    
    for (const promoData of testPromos) {
      const existingPromo = await promosService.getPromoById(promoData.title);
      if (!existingPromo) {
        await promosService.createPromo(promoData);
        console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–∫—Ü–∏—è: ${promoData.title}`);
      } else {
        console.log(`‚ö†Ô∏è –ê–∫—Ü–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: ${promoData.title}`);
      }
    }
    
    console.log('üéâ –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!');
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∞–∫—Ü–∏–π:', error);
  } finally {
    await app.close();
  }
}

seedPromos();

